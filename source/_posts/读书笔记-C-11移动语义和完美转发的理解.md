---
title: '[读书笔记]C++11移动语义和完美转发的理解'
date: 2019-01-03 22:54:19
tags:
- 技术
- C++11
---

  移动语义和完美转发是C++11中重要的新增项目，最近在阅读“Effective Modern C++”书，里面用了一大章节来阐述该新增功能该如何使用。

<!-- more -->

首先要明确，`std::move`并没有在内存上移动任何东西，`std::forward`也没有转发任何东西，它们仅仅完成了一次数据类型的转换。对于`std::move`,其实际名称应该为`std::cast_to_rvalue`更为准确，只是这样看上去不太美观且当时名字已经被c++委员会确定，于是沿用至今。

move的原型

```cpp
template <typename T>
typename remove_reference<T>::type && move(T&& t) {
   return std::static_cast<typename remove_reference<T>::type&&>(t);
}
 
```

forward的原型

```cpp
template<typename _Tp> inline _Tp&&
forward(typename std::remove_reference<_Tp>::type& __t) { 
  return static_cast<_Tp&&>(__t); 
}
```